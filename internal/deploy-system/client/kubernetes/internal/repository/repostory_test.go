package repository

import (
	"bufio"
	"context"
	"devops-platform/internal/deploy-system/client/kubernetes/internal/domain"
	"fmt"
	"testing"
)

type config struct {
}

func (c *config) GetAddress() string {
	//return "https://kubernetes.docker.internal:6443"
	return "https://192.168.0.72:6443"
}

func (c *config) GetCertificateAuthority() string {
	//return "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1EWXdNVEF6TlRNME1Gb1hEVE16TURVeU9UQXpOVE0wTUZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBSnNRCkdRRUtkUkF1dFVSOFhtSnFEdTVGSTBqbVI0V09lL25WUm5JYWViNFJBRmgxYmp3WE43NFRRci9XS052eEZvRU4KVE55UVJvejdJL3JNUEZiaWVFaDZaSDRtNmJCeURkZ3cxVnFhNkJFbEZPdWZaTHZCdVJ3ZmRzWVJSWWhPd09YQQpybUtGd1FET3VyODA3YWNXaHJMREFYdUhRaWpNOXhZOEswN09zcUVSYnRZNVRqMHZZWWNKb0dRcjRwUXYrVGlVCjFsdmYxcE5LZERiODRhQ09ZOXJPWEllRDZJTmxaMTFqMzAwei9uWmt1azlrN2NET0ZwTVpJQm5CeGowbEdzUTgKVDdyR2U4cjJKa0dRT0RLcWZyamFsL2Nrd0JiMDNMb1J4S2JVMTd0UFBWa3dSMEZGTUF3OEFJK3ZubkMzVlBTYwovb3NweUtWOVJoc1BFNEE3dlhVQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZDZHRLdnlKUTkvelcrSFowUWpsOGRCSGJqSFRNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRW40c2RHZ2w5aHpKaUFZN3E1bQpHQlJFc1FXNTBrT2ptZS9Na0VpWGtCTUlud2xlS1M3TWtZWEpQdVZKWXNJYVU0M2lxMEJoYnF3dG9BY0NRV2kvCjUrKzlrNVkzcjVTRjJLRjZuQXZBYWNvUW5pYW5Nd3ZnbVhRanpiMXhUZzZYMU93Y0pLNmdleUIwd25YUE5iWE8KWHdrRHJpOTZoOU1ibnBsMG9wVkFBN1V5bmNDNTh2VVRZZmtVeUxRNUd0Y0xqTlFOeTJaWTlpNFM1MzlsOEsrNwozWGMyNVp6QkpDdVZiTUNsUEd4S2hDSXpBMFB5amZvdmpMYlZlUStlS1RuSVYxS08ycUdtbEF2S3VKVVp1UzkyCkdkK3ZpM2xYcFZLcmFIMEd1WlZvRGIvRHM5dUkreXZ3VFROK3pISGpOU3NMN2xoME5DNEtuQ0x4MDN4aHRZSUsKRmZjPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
	return "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeE1EZ3lNakE0TWpFek1Gb1hEVE14TURneU1EQTRNakV6TUZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTHNmClh0SURvcEgyT3pLMjZWUnBOYWo1bVY0ZENVT3k3ZzQ0TU9NVzNscW1lK2tLdWtDdEI0WExoMytGQzVURksxSUkKUDJqcHNqVnV6SHNORFpjVVVlZ3BWS0Z5SGltazhDd0tNRHNISUxLNXNIZ0RRazhCUTlwdmFHdVhPTjBiODdVegpEYmVDeTlWOStSb0x0ZEhFTTVLRzJaZXF5ODloTm1tM2ZnYXNKTFEyQmlZeTVQZjJMeDNSVjVCLzRHNXJOck1DClVObnpKNnpaa1RJQVgya2pDcG1GWTVHNTgxelBucHJaVnQ0VUp5R1ZCaFVxT0ppZ1N2N2ZJUWM2RG5tbGxJV0UKNUhkRlNpejVRVm14dzZFNTh5SzBWdGdjZDNIS2NBSTlVTFNWU2YyTG00VlRaT1FidjJoQUhKSEpTRmJLanRhUQo2RjZzQ2RGUDNoNUlJT0liNDNrQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZEcFF4c2RuTTgxWlBGNTB0Rm1VMGpEU0JmMEFNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFDZHQxeGRQaWdIeWRQVVhZRTVpOU9RQnNGaVlMTDJGMUVpZm9RbmNibmF4MUNmZGZIYQpqVTRXbDhUWmxTMFZhazRvZUZrUnE0S3M3U05BTlpVaEROeUx6ZHc0RThYaWFIeXRFUkNVMitzbkdETUZJQmlHCkZmUVVnRzdGaFg2QzhDYkFUVTJyWWZ3d0pDQURCWVdoUERHZloyNWJyRS9KRzA4MFRwdEtNVVdYSW03cWNodjkKSlRJcWpKLzd2Yk1ISnh6S2I4UzFUMCs5SDNndm9jMm9xenN3VkRUeUtJNWV6SjJiN1dRMEpTSHlxNTZWL1dtTQpWVmJ5NmJVWVdNZGUvZFNoNkMvdlNHMEphWVM1Z2pYRmZialo5cklRRE9aandHTnNkbHBBaVIrdlNCNkR6TXZCCnoyTjI5a0tIMTJIVFRObTkwM1ViWmMxZHVwYXM5SUZaU0tSLwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
}

func (c *config) GetUserClientCertificate() string {
	//return "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURRakNDQWlxZ0F3SUJBZ0lJR29DbnlheHZlL3d3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpBMk1ERXdNelV6TkRCYUZ3MHlOREE0TURFd01qVXdNRE5hTURZeApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sc3dHUVlEVlFRREV4SmtiMk5yWlhJdFptOXlMV1JsCmMydDBiM0F3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRREFIS1IrUkNIWTZMWmEKaGZEdjZpNGZFWlJGVWVScEU4d0xuWTdVdWtrWUExZE94SjhRMXhuUVFwZ2RKZHFaQzZHOEJUZnJWWW1nMWpoMQoyTytKNXhNSFJ0TzRUaWZna1JZUDJQSThMUkFaVTJ4UUZlckNsL1VFTWowOXNZRmR5YVRWRDh5emxqemxHRWxwClovblFFNk1kZk5PSWFPTkFuKzA2K2NEcXJGWXpIM25MVTE4UC9RRDFQSDhMTVc2UloxdmFET0N0R1ZTK1djdGQKQmhYbk03TkVSYlhReFhkb0tIaEp3YjlYeDI4S2pXaGpac3h1M2wrSDdyL3FYUUFTKzJrcElqTHF4eXhNejYyNgp3SjRyMUI0bE5yTnkxQVp2Zk9zK0YvSGFjUjlxSTVBRjR5cC85ckV2RDJIeXUrS2pkKzFtNnFaR0ZPMldpclE0Clc1YS8wc2YvQWdNQkFBR2pkVEJ6TUE0R0ExVWREd0VCL3dRRUF3SUZvREFUQmdOVkhTVUVEREFLQmdnckJnRUYKQlFjREFqQU1CZ05WSFJNQkFmOEVBakFBTUI4R0ExVWRJd1FZTUJhQUZDZHRLdnlKUTkvelcrSFowUWpsOGRCSApiakhUTUIwR0ExVWRFUVFXTUJTQ0VtUnZZMnRsY2kxbWIzSXRaR1Z6YTNSdmNEQU5CZ2txaGtpRzl3MEJBUXNGCkFBT0NBUUVBQXk1RzNVTUxLUnBRRG93SVRhWklrdEZWbTJvK2w2VUJtTTlrWmljMzFuZVBBeGU5SGYyM3FlYjcKTm1OK29EOWRvTFQ5VFU2bmhDVDduWEtFTlExZk1JUmprakdhcGNib1Y4dGdUZVZLYkxMN3h0SVM0dExiTG44WQpzS3RvTVVvSG5kNU1CTzI0UFhRamdSY05MZmZsdE03WDBVMUY3ekllM1pQcGpJZHA0WlN0UHpBQThHakpQbVR2CjdkNFVHb1p0aXBFWit6RDYweW42OWNJM1JEa1VxcittZG9QVXZMYTVMWWVBeFR1TzZkR3E5Z1hMdGljcTh4aWUKcDA3YzNxZ2xIOGphanB2SVQydTlVN3JPejFNelFhWXZESEZBZTNoMzI0TExRVUpIUEFUaFVTclRuSE54NmFkRQpUZ29OQlRDZ2xqdnM4SEt2Mk01SDgwY01PemZPc2c9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
	return "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJWkMwSFdQRzZZNkV3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TVRBNE1qSXdPREl4TXpCYUZ3MHlOREExTVRZd056VXdNREJhTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQW4vdzNKTWZPYy9hdFQ3ZUEKQkFOTjZqN29oOWx4WnEwZ0lKQi9KYzlObUx5MHQ1WXc3K2ZkSERVMkRMS0hDTDQ2UXV1YmhBSmUzejA2L09PegorYmw4cTZlNWM0dzNRalhZbGxYbUpxQ1NKVTNzU2RKcnBEV1JWUEJCeGNhRXNXekZpeHhEajF6ZHBnVFZ5QXROCnRvYTRVdEM3QWlYaGFDWFExMlhmTkFORFhNSWxKalByMjVsRjlHanlLYjV5bEdidFgraFhkcjZoRVZsSDZBeWMKRFlQOTFWTjlWOW54WTBpMkhUNXNHNHZHRHNKTi9aK05rbFdIYjRNV3ZnWXZ3bm1HM3g0b2NqMVFwTWN6V0puRgpFNEdmUDVUWW1HSUN2SmtDcjY5bWVNSGlzY1FTMjRCRWVpeFZ1RlRCY24zWUgxRGhaMkVYZ2hwNVo1TG5zRmpZCmdMZmZId0lEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JRNlVNYkhaelBOV1R4ZWRMUlpsTkl3MGdYOQpBREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBdEJoWDY1eHhGcXFvKzV1L3cvTkkxckpFeHIvbk50SkhVR3MrCldORjdtZDVvN3FjTVdZZk5NN0VtYjhJd2FKMkpqT2hrR1lLODVIMGhJNFBEcmNZNlVnZno0dGJYS3lkc1RqeDEKU2pqdjIwZUcvS0RVL2xsR3BwOVFKSER1cjRvV3QwUGs1YmhkamNrVWNwanRzOTk4ZnhDK29rWWRvWWQ4WURnLwo2MjlqMERNS29hS0hjYVZkdzVDYXdxMWoxMnFkY2dud0d5amxCeDVUU0REVHg4OW12R3kwaEJFNmJsTjdMakdlCktlTk9OOWRIdWtGb1hFTXRaOEluR1M3aDZlUWJxUHRHamJ3SndEYXRkOU5POEMrYU1vbC9CN2sxN3ZUT0puSHoKYXJhMkplV3ZRL1hnNUxXelQ5NjMyc2cvcFZZVEgvNkJoS0Rpc3hIVklPQkdpZGF4eHc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
}

func (c *config) GetUserClientKey() string {
	//return "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBd0J5a2ZrUWgyT2kyV29Ydzcrb3VIeEdVUlZIa2FSUE1DNTJPMUxwSkdBTlhUc1NmCkVOY1owRUtZSFNYYW1RdWh2QVUzNjFXSm9OWTRkZGp2aWVjVEIwYlR1RTRuNEpFV0Q5anlQQzBRR1ZOc1VCWHEKd3BmMUJESTlQYkdCWGNtazFRL01zNVk4NVJoSmFXZjUwQk9qSFh6VGlHampRSi90T3ZuQTZxeFdNeDk1eTFOZgpELzBBOVR4L0N6RnVrV2RiMmd6Z3JSbFV2bG5MWFFZVjV6T3pSRVcxME1WM2FDaDRTY0cvVjhkdkNvMW9ZMmJNCmJ0NWZoKzYvNmwwQUV2dHBLU0l5NnNjc1RNK3R1c0NlSzlRZUpUYXpjdFFHYjN6clBoZngybkVmYWlPUUJlTXEKZi9heEx3OWg4cnZpbzNmdFp1cW1SaFR0bG9xME9GdVd2OUxIL3dJREFRQUJBb0lCQUVZQnFnZkJPRHhkQVNhWApyS2NneFZIWkRCaitzS2VCNlZkS1FTUlFCaGJVRU5ySlY5WEJMTXp4bDVEM25HTXRFL0Q2VGRoYVFWNzA4WG93ClpZbnhSTVBnRVlNV0ovM3pvUUNCWkRSOWoySkxQaXNvOFhXYi9sTmJJMm41NTFTUUNKc0R1T3F3a3R4QkwyOVQKem5yK3pQQVA3dDNFcXh0L3ErbFQzZk1tZmZyK21iUzFZWnZUSW5hcHdER3ZDVFRmWXpSVDh6V2FCdy9Id3U3bgp3dy9VR0RzZ1UyQTF1bTlWSFVtOENoalU1TXpRS0FiZUV1d0pNcEZqK1hlRnJ4a2FDVU5DL04wUXk0MVptOGVOCnJoM2Q2UitnMFluZHc5Z1JvcGF6TXREd3l1MzNlUk1hOUQ3MjFkRmxuTzJkQiszVlVjVFRCcWhLYWhXZjkrTmoKTWtxTGNBRUNnWUVBNE5LTXZzaU9SRmdEaUFNcnQ1NzJFek4ydU1DQ1J5OW5oMjFYNk84QnlHUDA5NGJNSnlhLwpVeG5YYWJzNWE2YTk5TEZSNHhoQXhTR2xHbUQyUnA1MEV6aG5MNmFYUUh3MmpQbGh0bzd6WHJBeVhPdE5PUUp6CjNrWkZnZlFYcGZkS3czSFZPeDRVMVIxdlp4b0t2a2RvK0Nxc1hxcmxIVkNjSnFOV0lFU1MyLzhDZ1lFQTJzRFUKbjBlcEVZa0E1THFOREVDMWdFUVFLeldJWnplZUZ0ZnJOa3k4cXhxMVpJL2xMUFM2cTQ1Y09BUkpRMTNCSHpIUQpCL09odG4vYnVKUm9qNytZVDdBUmowTEJJL3VYZ2dncXorZ0t0dDEzbElYY24vVEZCTHRqZERVZW9GK01OWE5SCk1nUE1KNzYvdEtvUUtkYXlNbUNIMGZVczFGNFh2Zm5yL3ozd0ZBRUNnWUJ0QnU1bVh4QlBLSGVkOEJ1MVVvdDMKU0UvY3pNN2hBcVlzVU9SKys5bGJlczREZEFWeFB5TXRnNnlwZzdnVzhxZlFFR1hyd1lrM2tGZG04WHE5U0g1MgpDN1pPcjNWT09tNmg4eFpsMS9GQ0RDU0FWMFA5ejZpdE5Gcms2S0RIUmFPbUlJQU55VXJGQng5TldwMjNKUjVNCnF6VW9PNndjaVVrUW04bGFvS2F2dFFLQmdHWXgrZU1qbmtlVDRyZjRzeFpMVUwvSWpHa3pURE0wVjRYQ2Y1OVIKZ0Q3TGJueTVnTTVjMHF4OUNIWWZBbjhYV0xhVEZlWHhHdFpncXl4eklOb3ZIeC96V0hDK05lN3loZGg0cWsrUQp6eGlaSkZsZHBER1NMMHpEb25YU3J5a3JHaHlLY0I5V2lOVDBseWoyM2pBOW5laE5Fb2F5N0t1Vi9hK0NCNCtwCnh2UUJBb0dBUjZXUUZpSUI2WElSNTd3OWxKT0p2SG56Wk9HSE9tTHlXY2FFams2ejB4VmluVkp5bnpvZWhvOUIKQ0EwV0g0ZGFIUk1hVklxTEFDenRNWTNPNEdaZmVTWXFwdHI3bkRtZ0RTaVBEVVVKRjhMZ1BxTVZIOG5lZkI1dgpDVis3MEhTWFdabFg5dXloc0V4anpEZDFnS2FaV094MjdGdFd6VC9nM2VSYnBsS1J6L2c9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="
	return "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBbi93M0pNZk9jL2F0VDdlQUJBTk42ajdvaDlseFpxMGdJSkIvSmM5Tm1MeTB0NVl3CjcrZmRIRFUyRExLSENMNDZRdXViaEFKZTN6MDYvT096K2JsOHE2ZTVjNHczUWpYWWxsWG1KcUNTSlUzc1NkSnIKcERXUlZQQkJ4Y2FFc1d6Rml4eERqMXpkcGdUVnlBdE50b2E0VXRDN0FpWGhhQ1hRMTJYZk5BTkRYTUlsSmpQcgoyNWxGOUdqeUtiNXlsR2J0WCtoWGRyNmhFVmxINkF5Y0RZUDkxVk45VjlueFkwaTJIVDVzRzR2R0RzSk4vWitOCmtsV0hiNE1XdmdZdndubUczeDRvY2oxUXBNY3pXSm5GRTRHZlA1VFltR0lDdkprQ3I2OW1lTUhpc2NRUzI0QkUKZWl4VnVGVEJjbjNZSDFEaFoyRVhnaHA1WjVMbnNGallnTGZmSHdJREFRQUJBb0lCQUVUWm1qR3QrMTlVallsOQpBdzYzRFZUOTlieGhDN2lRVVA4eXNFVnBUWStweG13cnFxdlVNUWZ1cm5BUWRLU0NtVGdyaFNYdWp6MnJjRE5kCkd4c2hoRkdyUU5oRlE1S3U4YUxoSE1jSzIxcEtpcUhLZUtDV25SRGN4TEdFbVo1eG5TSWM2OFpLeE9pcHRBYi8KTmxhUzY4aFlJK0xzd25DN3RZQzlTcTFycWhYRW1VOWlXK05CcFRyWEd1VnpMU2o2ZUQ4dE0veVJyekNZeHRCbgpGaUVtczhaS05GUVFIZFZtRWJGSzBWQUhxeUJMRHFMK0hVRm9tK3RadFJPYzNLclFYYnYwTzZFdy8wUjVyNTZrCis4RGdqVzdLdlBPemcrWENxY3BicUw3bFlhVTBBVGVNWUl1cVltR2QvRkh1VzBWVk1oVU1ySWZsTmQ3aEZ5ZXcKYThwaGlTRUNnWUVBei9KUHRXNEU4YVpaQVBnUnRKcHZNZFR1enI1M2h0ZzI3cjhZd0NLNFdud3c1Y3lVQVVKTQo4enI5ekNMWjRZTHBZZk43WFlYcFc4bGpkZTYxNjgySnJzenEydFlmVXFZV3UzdUNPRDJ3QVJ0dnpUTE5RNy9JCjltbGZjZTJGWVo4UUxOOTl4Q2xKUlpheUc4dDlzVWxzT252aVdCakxPbmJLV0YvZjcxTzc5WDBDZ1lFQXhQU2MKaktSczIvcThJVXV3SVpubktsOTNSY0Q1Nm9nUTBVQ2t5OElwRldwYzZkVEtaNW5pNWpkWjZEdVFOU1hnczVCVApLcVNqOWxCL1FiWEZyZkNJek5BajZhNG43NlBwMVE5N0FtRk9vMFF6d0VxKytZQ3hRNFpGbmF5eEowTTY1dHdlCktvOEVqa0wyTlQ4MkRubjF1TG5wUWdDTVh1UExoTDN4Qk5Edkdjc0NnWUF2ZldBMHlBNTYvWW1BRGlkRS9xdjgKVG12SGJYb3dvbnBSSmZWS0UrUFVUbDZBYktzMGFtYldlWmR5b2xidUNJNnlId0FDaU0yVmQ3V3VQamp2eEQzNApYTFlhQ2lLWEpuVTBsZTFVV01vMFJvYk83eFl2cmNJQWZHb2V3NmJkZDQwaklscy9qRW8raVQ3ZDJDZzViOUkyCnZRb2hJbkJ2UnFmSmJRUGdUVmcwcFFLQmdRQ3V0ZW9VM0Zwd2ZLZmJ4VDgxWDBkdkVBWkdpeHRtVDFMVHZFc3oKTUVXdmFJMkpJeWgwNUU0aE42SjZYalBhNFlIRTUxYk84Z004SVVYeGJTUXcycmtQTGVkZGlBNkhCbGtMbGRMaApWcDRpT0FMTUpjSG9vNThiTGdXZEM2Nk9ESlk0YWJRY3ZvY2xCd05PVW9kS0tpZXR1TVRRdHBuT0pyWEhSNUtBCldqSnZKd0tCZ0Z4NlpkZTA1ZDF6ZUFaWWtOb3FsRE1WUGZQbWJNeVJKZXVRZ2dyay9SN2lRb2dzaE1QNk1mSE8KOUNWSFlJU1dRS2pyQ2svajVOMU0vRlNuRVNZWENyRUVweVpmaFZVZldFdkZEdEs5M1lReDgxZVFjMkJPbnZmbgplZVpaVE50TzhhYTBHT09kR1RiUW5QVHdmSGxDR0RWbXRNWEFmUjlhWWU3VUZpeVZtQlhVCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="
}

func getConfig() domain.KubernetesConfig {
	return &config{}
}

func TestRepository_GetPodLogs(t *testing.T) {
	r, err := New(getConfig())
	if err != nil {
		t.Fatal(err.Error())
	}
	log, err := r.GetPodLogs(context.TODO(), "niffty-apps", "auth-deploy-64dd67c4cd-jc4nm", "auth")
	if err != nil {
		t.Fatal(err.Error())
	}
	fmt.Print(log)
}

func TestRepository_GetRealTimePodLogs(t *testing.T) {
	r, err := New(getConfig())
	if err != nil {
		t.Fatal(err.Error())
	}

	closer, err := r.GetRealTimePodLogs(context.TODO(), "niffty-apps", "auth-deploy-64dd67c4cd-jc4nm", "auth")
	if err != nil {
		t.Fatal(err.Error())
	}
	defer closer.Close()
	scanner := bufio.NewScanner(closer)
	for scanner.Scan() {
		fmt.Println(scanner.Text())
	}
	if err := scanner.Err(); err != nil {
		t.Fatal(err)
	}
}

func TestRepository_RestartDeployment(t *testing.T) {
	r, err := New(getConfig())
	if err != nil {
		t.Fatal(err.Error())
	}
	err = r.RestartDeployment(context.TODO(), "niffty-apps", "auth-deploy", "xin")
	if err != nil {
		t.Fatal(err.Error())
	}
}

func TestRepository_GetDeploymentConfig(t *testing.T) {
	r, err := New(getConfig())
	if err != nil {
		t.Fatal(err.Error())
	}
	confMap, err := r.GetDeploymentConfig(context.TODO(), "niffty-apps", "admin-deploy")
	if err != nil {
		t.Fatal(err)
	}
	fmt.Print(confMap)
}
